# This file was generated by the "yardl" tool. DO NOT EDIT.


import dataclasses
import datetime
import enum
import types
import typing
import numpy as np
import numpy.typing as npt
from . import yardl_types as yardl
from . import _dtypes

T = typing.TypeVar('T')
T_NP = typing.TypeVar('T_NP', bound=np.generic)
U = typing.TypeVar('U')
U_NP = typing.TypeVar('U_NP', bound=np.generic)

@dataclasses.dataclass(slots=True, kw_only=True)
class PT(typing.Generic[T]):
    x: T
    y: T
    z: yardl.Int32 = 0


@dataclasses.dataclass(slots=True, kw_only=True)
class WithUnion(typing.Generic[T, U]):
    f: T | U

def _mk_get_dtype():
    dtype_map: dict[type | types.GenericAlias, np.dtype[typing.Any] | typing.Callable[[tuple[type, ...]], np.dtype[typing.Any]]] = {}
    get_dtype = _dtypes.make_get_dtype_func(dtype_map)

    dtype_map[PT] = lambda type_args: np.dtype([('x', get_dtype(type_args[0])), ('y', get_dtype(type_args[0])), ('z', np.dtype(np.int32))], align=True)
    dtype_map[WithUnion] = lambda type_args: np.dtype([('f', np.dtype(np.object_))], align=True)

    return get_dtype

get_dtype = _mk_get_dtype()

