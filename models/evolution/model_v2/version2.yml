ProtocolWithChanges: !protocol
  sequence:
    int8ToInt: int8
    int8ToLong: int8
    int8ToUint: int8
    int8ToUlong: int8
    int8ToFloat: int8
    int8ToDouble: int8

    intToUint: int
    intToLong: int
    intToFloat: int
    intToDouble: int
    uintToUlong: uint
    uintToFloat: uint
    uintToDouble: uint

    floatToDouble: float

    intToString: int
    uintToString: uint
    longToString: long
    ulongToString: ulong
    floatToString: float
    doubleToString: double

    intToOptional: int
    floatToOptional: float
    stringToOptional: string

    intToUnion: int
    floatToUnion: float
    stringToUnion: string

    optionalIntToFloat: int?
    optionalFloatToString: float?

    aliasedLongToString: AliasedLongToString
    stringToAliasedString: string
    stringToAliasedInt: string

    optionalIntToUnion: int?
    optionalRecordToUnion: RecordWithChanges?

    recordWithChanges: RecordWithChanges
    aliasedRecordWithChanges: AliasedRecordWithChanges
    recordToRenamedRecord: RenamedRecord
    recordToAliasedRecord: RecordWithChanges
    recordToAliasedAlias: RecordWithChanges

    # Comprehensive NamedType changes
    rlink: RLink
    rlinkRX: RLink
    rlinkRY: RLink
    rlinkRZ: RLink

    raRLink: RA
    raRX: RA
    raRY: RA
    raRZ: RA

    rbRLink: RB
    rbRX: RB
    rbRY: RB
    rbRZ: RB

    rcRLink: RC
    rcRX: RC
    rcRY: RC
    rcRZ: RC

    rlinkRNew: RLink
    raRNew: RA
    rbRNew: RB
    rcRNew: RC

    rlinkRUnion: RLink
    raRUnion: RA
    rbRUnion: RB
    rcRUnion: RC

    optionalRecordWithChanges: RecordWithChanges?
    aliasedOptionalRecordWithChanges: AliasedRecordWithChanges?

    unionRecordWithChanges: [RecordWithChanges, int]
    # aliasedUnionRecordWithChanges: [AliasedRecordWithChanges, int]

    unionWithSameTypeset: [RecordWithChanges, int, float, string]
    unionWithTypesAdded: [RecordWithChanges, float]
    unionWithTypesRemoved: [RecordWithChanges, int, float, string]

    recordToOptional: RecordWithChanges
    recordToAliasedOptional: RecordWithChanges
    recordToUnion: RecordWithChanges
    recordToAliasedUnion: RecordWithChanges

    vectorRecordWithChanges: RecordWithChanges*

    streamedRecordWithChanges: !stream
      items: RecordWithChanges

    addedStringVector: AliasedString*
    addedOptional: RecordWithChanges?
    addedMap: string->string
    addedUnion: [null, RecordWithChanges, string]
    addedRecordStream: !stream
      items: RecordWithChanges
    addedUnionStream: !stream
      items: [RecordWithChanges, RenamedRecord]


AliasedString: string
AliasedLongToString: long
AliasedRecordWithChanges: RecordWithChanges

RecordWithChanges: !record
  fields:
    intToLong: int
    deprecatedVector: int*
    floatToDouble: float
    deprecatedArray: byte[7]
    optionalLongToString: long?
    deprecatedMap: string->int*
    unchangedRecord: UnchangedRecord

UnchangedRecord: !record
  fields:
    name: string
    age: int
    meta: string->double

RenamedRecord: !record
  fields:
    i: int
    s: string

RLink: RA
RA: RB
RB: RC
RC: !record
  fields:
    subject: string

UnusedButChangedRecord: !record
  fields:
    name: string
    age: int
