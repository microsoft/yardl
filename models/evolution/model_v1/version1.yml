ProtocolWithChanges: !protocol
  sequence:
    int8ToInt: int
    int8ToLong: long
    int8ToUint: uint
    int8ToUlong: ulong
    int8ToFloat: float
    int8ToDouble: double

    intToUint: uint
    intToLong: long
    intToFloat: float
    intToDouble: double
    uintToUlong: ulong
    uintToFloat: float
    uintToDouble: double

    floatToDouble: double

    intToString: string
    uintToString: string
    longToString: string
    ulongToString: string
    floatToString: string
    doubleToString: string

    intToOptional: int?
    floatToOptional: float?
    stringToOptional: string?

    intToUnion: [int, bool]
    floatToUnion: [float, bool]
    stringToUnion: [string, bool]

    optionalIntToFloat: float?
    optionalFloatToString: string?

    aliasedLongToString: AliasedLongToString
    stringToAliasedString: AliasedString
    stringToAliasedInt: AliasedInt

    optionalIntToUnion: [null, int, string]
    optionalRecordToUnion: [null, RecordWithChanges, string]

    recordWithChanges: RecordWithChanges
    aliasedRecordWithChanges: AliasedRecordWithChanges
    recordToRenamedRecord: RenamedRecord
    recordToAliasedRecord: AliasedRecordWithChanges
    recordToAliasedAlias: AliasOfAliasedRecordWithChanges

    # Comprehensive NamedType changes
    rlink: RLink
    rlinkRX: RX
    rlinkRY: RY
    rlinkRZ: RZ

    raRLink: RLink
    raRX: RX
    raRY: RY
    raRZ: RZ

    rbRLink: RLink
    rbRX: RX
    rbRY: RY
    rbRZ: RZ

    rcRLink: RLink
    rcRX: RX
    rcRY: RY
    rcRZ: RZ

    rlinkRNew: RNew
    raRNew: RNew
    rbRNew: RNew
    rcRNew: RNew

    rlinkRUnion: RUnion
    raRUnion: RUnion
    rbRUnion: RUnion
    rcRUnion: RUnion

    optionalRecordWithChanges: RecordWithChanges?
    aliasedOptionalRecordWithChanges: AliasedRecordWithChanges?

    unionRecordWithChanges: [RecordWithChanges, int]
    # aliasedUnionRecordWithChanges: [AliasedRecordWithChanges, int]

    unionWithSameTypeset: [float, RecordWithChanges, string, int]
    unionWithTypesAdded: [RecordWithChanges, int, float, string]
    unionWithTypesRemoved: [RecordWithChanges, string]

    recordToOptional: RecordWithChanges?
    recordToAliasedOptional: AliasedOptionalRecord
    recordToUnion: [RecordWithChanges, string]
    recordToAliasedUnion: AliasedRecordOrString

    vectorRecordWithChanges: RecordWithChanges*

    streamedRecordWithChanges: !stream
      items: RecordWithChanges

    addedOptional: RecordWithChanges?
    addedMap: string->string
    addedRecordStream: !stream
      items: RecordWithChanges


AliasedInt: int
AliasedString: string
AliasedLongToString: string
AliasedRecordWithChanges: RecordWithChanges
AliasOfAliasedRecordWithChanges: AliasedRecordWithChanges
AliasedOptionalRecord: RecordWithChanges?
AliasedRecordOrString: [RecordWithChanges, string]

RecordWithChanges: !record
  fields:
    floatToDouble: double
    unchangedRecord: UnchangedRecord
    intToLong: long
    optionalLongToString: string?

UnchangedRecord: !record
  fields:
    name: string
    age: int
    meta: string->double

RenamedRecord: DeprecatedRecord
DeprecatedRecord: !record
  fields:
    s: string
    i: int

RX: RLink
RLink: RNew
RNew: RY
RY: RZ
RZ: !record
  fields:
    subject: int

RUnion: [RX, string]

UnusedProtocol: !protocol
  sequence:
    records: !stream
      items: UnchangedRecord

UnusedButChangedRecord: !record
  fields:
    age: float
    name: string
